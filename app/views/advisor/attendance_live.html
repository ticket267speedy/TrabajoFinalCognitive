<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Live Attendance</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <style>
      :root {
        --cyan: #06b6d4;
        --cyan-10: rgba(6,182,212,0.10);
        --orange: #f59e0b;
        --green: #10b981;
        --red: #ef4444;
        --gray-50: #fafafa;
        --gray-100: #f3f4f6;
        --gray-200: #e5e7eb;
        --gray-300: #d1d5db;
        --gray-400: #9ca3af;
        --gray-500: #6b7280;
        --gray-700: #374151;
        --black: #111827;
        --shadow-md: 0 6px 18px rgba(0,0,0,0.08);
        --radius-6: 6px;
        --radius-8: 8px;
        --radius-12: 12px;
      }
      body { background: #f6f8fa; }

      .soft-card { background: #fff; border-radius: var(--radius-12); box-shadow: var(--shadow-md); padding: 28px; border-top: 5px solid var(--cyan); }
      .muted { color: var(--gray-500); }

      /* Toolbar */
      .toolbar { height: 60px; background: var(--gray-50); border-radius: var(--radius-8); padding: 0 20px; display: flex; align-items: center; justify-content: space-between; margin: 20px 0; }
      .search-wrap { position: relative; width: 300px; }
      .search-input { width: 100%; height: 40px; padding-left: 40px; border: 1px solid var(--gray-300); border-radius: var(--radius-8); }
      .search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--gray-500); }

      /* Table */
      .table-block { border-radius: var(--radius-8); overflow: hidden; border: 1px solid var(--gray-200); background: #fff; }
      .table-header { background: var(--gray-200); height: 48px; display: grid; grid-template-columns: 50px 2fr 120px 180px 180px; align-items: center; padding: 0 16px; }
      .table-header span { font-size: 14px; font-weight: 700; color: #2f2f2f; text-transform: uppercase; }

      .table-row { display: grid; grid-template-columns: 50px 2fr 120px 180px 180px; align-items: center; padding: 12px 16px; border-bottom: 16px solid #f5f5f5; background: #fff; height: 75px; }
      .table-row:nth-child(even) { background: var(--gray-50); }
      .table-row:hover { background: var(--gray-100); }

      .student-cell { display: flex; align-items: center; }
      .avatar { width: 50px; height: 50px; border-radius: 999px; border: 2px solid var(--gray-300); overflow: hidden; display: inline-flex; align-items: center; justify-content: center; background: #fff; color: var(--gray-500); font-weight: 700; }
      .student-name { margin-left: 12px; font-weight: 700; font-size: 15px; color: var(--black); }

      .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; color: var(--gray-500); font-size: 14px; }

      .status-stack { display: flex; flex-direction: column; gap: 2px; }
      .status-chip { padding: 6px 10px; border-radius: 14px; font-weight: 600; font-size: 13px; display: inline-flex; align-items: center; gap: 6px; }
      .chip-present { background: rgba(16,185,129,0.10); color: #065f46; }
      .chip-absent { background: rgba(239,68,68,0.10); color: #7f1d1d; }
      .chip-late { background: rgba(245,158,11,0.10); color: #7c2d12; }
      .chip-pending { background: rgba(156,163,175,0.20); color: #374151; }
      .timestamp { font-size: 12px; color: var(--gray-500); }

      .btn-change { width: 90px; height: 32px; border: 1px solid var(--gray-300); border-radius: 6px; background: #fff; color: #2f2f2f; font-weight: 600; display: inline-flex; align-items: center; justify-content: center; gap: 6px; }
      .btn-note { width: 90px; height: 32px; border: 1px solid var(--gray-300); border-radius: 6px; background: #fff; color: #2f2f2f; font-weight: 600; display: inline-flex; align-items: center; justify-content: center; gap: 6px; }

      /* Pagination */
      .pagination-wrap { display: flex; align-items: center; justify-content: center; gap: 6px; height: 40px; margin-top: 16px; }
      .page-btn { width: 36px; height: 36px; border-radius: 999px; display: inline-flex; align-items: center; justify-content: center; border: 1px solid var(--gray-300); background: #fff; color: #2f2f2f; font-weight: 700; cursor: pointer; }
      .page-btn:hover { border-color: var(--cyan); }
      .page-btn.active { background: var(--cyan); color: #fff; border-color: var(--cyan); }
      .ellipsis { padding: 0 6px; color: var(--gray-500); }

      /* Final Action Buttons */
      .actions-final { margin-top: 32px; display: flex; align-items: center; justify-content: center; gap: 16px; }
      .btn-cyan { width: 200px; height: 48px; border-radius: 8px; background: var(--cyan); color: #fff; font-weight: 700; border: none; display: inline-flex; align-items: center; justify-content: center; gap: 8px; }
      .btn-outline-cyan { width: 160px; height: 48px; border-radius: 8px; border: 2px solid var(--cyan); background: #fff; color: var(--cyan); font-weight: 700; display: inline-flex; align-items: center; justify-content: center; gap: 8px; }
      .btn-outline-orange { width: 180px; height: 48px; border-radius: 8px; border: 2px solid var(--orange); background: #fff; color: var(--orange); font-weight: 700; display: inline-flex; align-items: center; justify-content: center; gap: 8px; }

      /* Modal Overlay */
      .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.40); z-index: 1000; display: none; }
      .overlay.visible { display: block; }
      .modal-card { position: fixed; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 520px; max-height: 90vh; overflow-y: auto; background: #fff; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); padding: 32px; z-index: 1001; }
      .modal-title { font-weight: 700; font-size: 20px; color: var(--black); margin-bottom: 8px; }
      .modal-close { position: absolute; right: 16px; top: 16px; width: 32px; height: 32px; border-radius: 999px; display: inline-flex; align-items: center; justify-content: center; background: transparent; border: none; color: #2f2f2f; }
      .modal-close:hover { background: var(--gray-100); }
      .student-info { background: var(--gray-100); padding: 16px; border-radius: 8px; margin-bottom: 20px; }
      .student-info .line { display: flex; align-items: center; gap: 6px; }
      .label { font-weight: 700; font-size: 14px; color: var(--black); }

      /* Custom radio options */
      .status-options { display: flex; flex-direction: column; gap: 10px; }
      .option { height: 48px; padding: 12px; border: 1px solid var(--gray-300); border-radius: 8px; display: flex; align-items: center; gap: 12px; cursor: pointer; }
      .option:hover { border-color: #333; background: var(--gray-50); }
      .option.selected.present { background: rgba(16,185,129,0.05); border: 3px solid var(--green); }
      .option.selected.absent { background: rgba(239,68,68,0.05); border: 3px solid var(--red); }
      .option.selected.late { background: rgba(245,158,11,0.05); border: 3px solid var(--orange); }
      .option.selected.justified { background: rgba(16,185,129,0.05); border: 3px solid #34d399; }
      .radio-outer { width: 20px; height: 20px; border-radius: 999px; border: 2px solid var(--gray-400); display: inline-flex; align-items: center; justify-content: center; margin-right: 12px; }
      .radio-inner { width: 10px; height: 10px; border-radius: 999px; display: none; }
      .option.selected.present .radio-outer { border-color: var(--green); }
      .option.selected.present .radio-inner { display: block; background: var(--green); }
      .option.selected.absent .radio-outer { border-color: var(--red); }
      .option.selected.absent .radio-inner { display: block; background: var(--red); }
      .option.selected.late .radio-outer { border-color: var(--orange); }
      .option.selected.late .radio-inner { display: block; background: var(--orange); }
      .option.selected.justified .radio-outer { border-color: #34d399; }
      .option.selected.justified .radio-inner { display: block; background: #34d399; }
      .option-text { font-size: 15px; font-weight: 600; color: var(--black); }

      /* Notes and checkboxes */
      .notes-label { font-size: 14px; margin-top: 20px; margin-bottom: 8px; }
      .notes-area { width: 100%; height: 90px; padding: 12px; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 14px; resize: vertical; }
      .small-muted { font-size: 13px; color: var(--gray-500); margin-top: 16px; }
      .check-item { display: flex; align-items: center; gap: 10px; margin-top: 10px; cursor: pointer; }
      .check-square { width: 20px; height: 20px; border-radius: 4px; border: 2px solid var(--gray-400); display: inline-flex; align-items: center; justify-content: center; }
      .check-square.checked { background: var(--cyan); border-color: var(--cyan); color: #fff; }
      .check-label { font-size: 14px; color: #2f2f2f; }

      .modal-footer { margin-top: 28px; display: flex; justify-content: flex-end; gap: 12px; }
      .btn-cancel { height: 40px; border-radius: 8px; border: 1px solid var(--gray-300); background: #fff; color: #2f2f2f; padding: 0 14px; }
      .btn-apply { height: 40px; border-radius: 8px; border: none; background: var(--cyan); color: #fff; padding: 0 14px; font-weight: 700; }
    </style>
  </head>
  <body>
    <div class="container my-4">
      <!-- Breadcrumb -->
      <div class="mb-3">
        <a href="/dashboard/" class="text-secondary" style="font-size:14px;"><span class="me-1">←</span> Back to My Courses</a>
      </div>

      <!-- Session Information Card -->
      <div class="soft-card">
        <div class="row g-4">
          <div class="col-12 col-lg-6">
            <div class="d-flex flex-column" style="gap:10px;">
              <div class="d-flex align-items-center gap-2">
                <i class="bi bi-book"></i>
                <span class="fw-bold" style="font-size:22px;">Calculus I</span>
              </div>
              <div class="d-flex align-items-center gap-2 muted">
                <i class="bi bi-calendar3"></i>
                <span style="font-size:16px;">Monday, November 10, 2025</span>
              </div>
              <div class="d-flex align-items-center gap-2 muted">
                <i class="bi bi-clock"></i>
                <span style="font-size:16px;">08:00 - 10:00</span>
              </div>
              <div class="d-flex align-items-center gap-2 muted">
                <i class="bi bi-geo-alt"></i>
                <span style="font-size:16px;">Classroom B-12</span>
              </div>
            </div>
          </div>
          <div class="col-12 col-lg-6">
            <div class="d-grid" style="grid-template-columns: repeat(2, 110px); gap: 12px;">
              <div class="d-flex flex-column align-items-center justify-content-center" style="width:110px;height:90px;background:rgba(59,130,246,0.10);border-radius:8px;">
                <div class="fw-bold" style="font-size:20px;">45</div>
                <div class="text-muted" style="font-size:12px;">Total</div>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-center" style="width:110px;height:90px;background:rgba(16,185,129,0.10);border-radius:8px;color:#065f46;">
                <div><i class="bi bi-check2-circle"></i></div>
                <div class="fw-bold" style="font-size:20px;">42</div>
                <div class="text-muted" style="font-size:12px;">Present</div>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-center" style="width:110px;height:90px;background:rgba(239,68,68,0.10);border-radius:8px;color:#7f1d1d;">
                <div><i class="bi bi-x-circle"></i></div>
                <div class="fw-bold" style="font-size:20px;">2</div>
                <div class="text-muted" style="font-size:12px;">Absent</div>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-center" style="width:110px;height:90px;background:rgba(245,158,11,0.10);border-radius:8px;color:#7c2d12;">
                <div><i class="bi bi-clock"></i></div>
                <div class="fw-bold" style="font-size:20px;">1</div>
                <div class="text-muted" style="font-size:12px;">Late</div>
              </div>
            </div>
            <div class="mt-3 position-relative" style="width:100%;background:#e5e7eb;height:12px;border-radius:999px;overflow:hidden;">
              <div id="progressFill" style="height:100%;width:0%;background:linear-gradient(90deg,#22d3ee,#06b6d4);"></div>
              <div class="position-absolute" style="right:8px;top:50%;transform:translateY(-50%);color:#fff;font-weight:700;">93%</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Toolbar -->
      <div class="toolbar">
        <div class="search-wrap">
          <i class="bi bi-search search-icon"></i>
          <input class="search-input" type="text" placeholder="Search student..." id="searchInput">
        </div>
        <div class="d-flex align-items-center" style="gap:8px;">
          <span class="me-2">Mark all as:</span>
          <button class="btn btn-success" style="width:100px;border-radius:6px;height:36px;">Present</button>
          <button class="btn btn-danger" style="width:100px;border-radius:6px;height:36px;">Absent</button>
          <button class="btn btn-warning" style="width:100px;border-radius:6px;height:36px;">Late</button>
        </div>
      </div>

      <!-- Table Header -->
      <div class="d-flex align-items-center justify-content-between mb-2">
        <div class="fw-bold">List of Students (45)</div>
        <div class="d-flex align-items-center gap-2">
          <span class="text-muted">Filter:</span>
          <select class="form-select form-select-sm" style="width:160px;">
            <option>All</option>
            <option>Present</option>
            <option>Absent</option>
            <option>Late</option>
            <option>Pending</option>
          </select>
        </div>
      </div>

      <!-- Table -->
      <div class="table-block" id="studentsTable">
        <div class="table-header">
          <span>#</span>
          <span>Student</span>
          <span>ID</span>
          <span>Status</span>
          <span>Actions</span>
        </div>
        <!-- Example rows -->
        <div class="table-row">
          <div>1</div>
          <div class="student-cell">
            <div class="avatar"><img src="https://via.placeholder.com/50" alt="" width="50" height="50"></div>
            <div class="student-name">Juan Pérez</div>
          </div>
          <div class="mono">EST001</div>
          <div class="status-stack">
            <span class="status-chip chip-present"><i class="bi bi-check2-circle"></i> Present</span>
            <span class="timestamp">08:05 AM</span>
          </div>
          <div class="d-flex align-items-center" style="gap:8px;">
            <button class="btn-change" data-student="Juan Pérez" data-id="EST001"><span>Change</span><i class="bi bi-chevron-down"></i></button>
            <button class="btn-note"><i class="bi bi-pencil"></i> Note</button>
          </div>
        </div>

        <div class="table-row">
          <div>2</div>
          <div class="student-cell">
            <div class="avatar">ML</div>
            <div class="student-name">María López</div>
          </div>
          <div class="mono">EST002</div>
          <div class="status-stack">
            <span class="status-chip chip-absent"><i class="bi bi-x-circle"></i> Absent</span>
            <span class="timestamp">08:12 AM</span>
          </div>
          <div class="d-flex align-items-center" style="gap:8px;">
            <button class="btn-change" data-student="María López" data-id="EST002"><span>Change</span><i class="bi bi-chevron-down"></i></button>
            <button class="btn-note"><i class="bi bi-pencil"></i> Note</button>
          </div>
        </div>

        <div class="table-row">
          <div>3</div>
          <div class="student-cell">
            <div class="avatar">CD</div>
            <div class="student-name">Carlos Díaz</div>
          </div>
          <div class="mono">EST003</div>
          <div class="status-stack">
            <span class="status-chip chip-late"><i class="bi bi-clock"></i> Late</span>
            <span class="timestamp">08:18 AM</span>
          </div>
          <div class="d-flex align-items-center" style="gap:8px;">
            <button class="btn-change" data-student="Carlos Díaz" data-id="EST003"><span>Change</span><i class="bi bi-chevron-down"></i></button>
            <button class="btn-note"><i class="bi bi-pencil"></i> Note</button>
          </div>
        </div>

        <div class="table-row">
          <div>4</div>
          <div class="student-cell">
            <div class="avatar">JP</div>
            <div class="student-name">Julia Paredes</div>
          </div>
          <div class="mono">EST004</div>
          <div class="status-stack">
            <span class="status-chip chip-pending"><i class="bi bi-hourglass"></i> Pending</span>
          </div>
          <div class="d-flex align-items-center" style="gap:8px;">
            <button class="btn-change" data-student="Julia Paredes" data-id="EST004"><span>Change</span><i class="bi bi-chevron-down"></i></button>
            <button class="btn-note"><i class="bi bi-pencil"></i> Note</button>
          </div>
        </div>
      </div>

      <!-- Pagination -->
      <div class="pagination-wrap">
        <button class="page-btn">1</button>
        <button class="page-btn active">2</button>
        <button class="page-btn">3</button>
        <span class="ellipsis">...</span>
        <button class="page-btn">8</button>
        <button class="page-btn">9</button>
      </div>

      <!-- Final Action Buttons -->
      <div class="actions-final">
        <button class="btn-cyan"><i class="bi bi-save2"></i> Save Attendance</button>
        <button class="btn-outline-cyan"><i class="bi bi-graph-up"></i> View Report</button>
        <button class="btn-outline-orange"><i class="bi bi-envelope"></i> Notify Absences</button>
      </div>
    </div>

    <!-- Status Change Modal -->
    <div class="overlay" id="statusOverlay"></div>
    <div class="modal-card" id="statusModal" style="display:none;">
      <button class="modal-close" id="modalClose"><i class="bi bi-x-lg"></i></button>
      <div class="modal-title">Change Attendance Status</div>
      <div class="student-info">
        <div class="line"><span class="label">Student:</span> <span id="mStudent">Juan Pérez (EST001)</span></div>
        <div class="line muted"><i class="bi bi-book"></i> <span id="mCourse">Calculus 1 - MAT301</span></div>
        <div class="line muted"><i class="bi bi-calendar3"></i> <span id="mDate">Monday, November 10, 2025</span></div>
      </div>
      <div class="label">Select new status:</div>
      <div class="status-options mt-2">
        <div class="option present" data-value="present">
          <div class="radio-outer"><div class="radio-inner"></div></div>
          <i class="bi bi-check2-circle" style="color:#10b981"></i>
          <div class="option-text">Present</div>
        </div>
        <div class="option absent" data-value="absent">
          <div class="radio-outer"><div class="radio-inner"></div></div>
          <i class="bi bi-x-circle" style="color:#ef4444"></i>
          <div class="option-text">Absent</div>
        </div>
        <div class="option late" data-value="late">
          <div class="radio-outer"><div class="radio-inner"></div></div>
          <i class="bi bi-clock" style="color:#f59e0b"></i>
          <div class="option-text">Late</div>
        </div>
        <div class="option justified" data-value="justified">
          <div class="radio-outer"><div class="radio-inner"></div></div>
          <i class="bi bi-check2" style="color:#34d399"></i>
          <div class="option-text">Justified</div>
        </div>
      </div>

      <div class="notes-label">Additional Notes (optional):</div>
      <textarea class="notes-area" placeholder="Add comment..." id="mNotes"></textarea>

      <div class="small-muted">If the absence is justified:</div>
      <div class="check-item" data-check="notifyAdvisor">
        <div class="check-square" id="checkNotify"><i class="bi bi-check-lg" style="display:none;"></i></div>
        <div class="check-label">Send notification to the scholarship advisor</div>
      </div>
      <div class="check-item" data-check="noCount">
        <div class="check-square" id="checkNoCount"><i class="bi bi-check-lg" style="display:none;"></i></div>
        <div class="check-label">Do not count towards absence statistics</div>
      </div>

      <div class="modal-footer">
        <button class="btn-cancel" id="btnCancel">Cancel</button>
        <button class="btn-apply" id="btnApply">Apply</button>
      </div>
    </div>

    <script>
      // Progress animation
      document.addEventListener('DOMContentLoaded', () => {
        const pf = document.getElementById('progressFill');
        if (pf) setTimeout(() => pf.style.width = '93%', 300);
      });

      // Search filter
      document.getElementById('searchInput').addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        document.querySelectorAll('#studentsTable .table-row').forEach(row => {
          const text = row.textContent.toLowerCase();
          row.style.display = text.includes(term) ? '' : 'none';
        });
      });

      // Modal interactions
      const overlay = document.getElementById('statusOverlay');
      const modal = document.getElementById('statusModal');
      const closeBtn = document.getElementById('modalClose');
      const btnCancel = document.getElementById('btnCancel');
      const btnApply = document.getElementById('btnApply');
      const mStudent = document.getElementById('mStudent');
      const mCourse = document.getElementById('mCourse');
      const mDate = document.getElementById('mDate');
      const notes = document.getElementById('mNotes');

      function openModal(studentName, studentId) {
        mStudent.textContent = `${studentName} (${studentId})`;
        overlay.classList.add('visible');
        modal.style.display = 'block';
      }

      function closeModal() {
        overlay.classList.remove('visible');
        modal.style.display = 'none';
        // Reset selections
        document.querySelectorAll('.status-options .option').forEach(o => o.classList.remove('selected'));
        document.querySelectorAll('.check-square').forEach(c => { c.classList.remove('checked'); c.querySelector('i').style.display = 'none'; });
        notes.value = '';
      }

      document.querySelectorAll('.btn-change').forEach(btn => {
        btn.addEventListener('click', () => openModal(btn.dataset.student, btn.dataset.id));
      });

      overlay.addEventListener('click', closeModal);
      closeBtn.addEventListener('click', closeModal);
      btnCancel.addEventListener('click', closeModal);

      // Select status option
      document.querySelectorAll('.status-options .option').forEach(opt => {
        opt.addEventListener('click', () => {
          document.querySelectorAll('.status-options .option').forEach(o => o.classList.remove('selected'));
          opt.classList.add('selected');
        });
      });

      // Custom checkboxes
      document.querySelectorAll('.check-item').forEach(item => {
        item.addEventListener('click', () => {
          const box = item.querySelector('.check-square');
          const icon = box.querySelector('i');
          const checked = box.classList.toggle('checked');
          icon.style.display = checked ? 'block' : 'none';
        });
      });

      // Apply changes (demo only)
      btnApply.addEventListener('click', () => {
        const selected = document.querySelector('.status-options .option.selected');
        const status = selected ? selected.dataset.value : null;
        console.log('Apply status:', status, 'Notes:', notes.value);
        closeModal();
      });
    </script>
  </body>
</html>